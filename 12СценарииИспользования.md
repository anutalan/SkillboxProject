---
## 10. Сценарии использования 
### *1.1 Мобильное приложение. Регистрация и первый запуск*

Actor: новый пользователь

Conditions:

- пользователь скачал мобильное приложение бренда


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Устанавливает приложение | Приложение устанавливается без ошибок, за несколько секунд |
| 2 Запускает приложение |Открывается стартовый экран входа в приложение|
| 3 Инициирует регистрацию в приложении |Открывается экран для ввода данных для регистрации с указанием обязательной информации об учетной записи клиента и стране, в которой будут сохранены данные пользователя |
| 4 Указывает обязательные поля, в том числе логин, пароль, страну,.., и подтверждает ряд согласий на сбор данных для аналитики и хранение персональных данных, сохраняет данные |Данные и согласия сохраняются в инфраструктуре облака, которое соответствует указанной стране пользователя. Открывается экран входа в приложение |
| 5 Вводит логин и пароль, страну пользователя и нажимает опцию входа в приложение |Происходит авторизация и аутентификация в инфраструктуре страны пользователя, открывается стартовый экран приложения с профилем пользователя|
| 6 Заполняет обязательные данные о характеристиках тела, уровне занятий спортом, выбирает виды спорта, которые ему интересны, указывает свои цели и сохраняет данные |Введенные данные сохраняются в профиль клиента без ошибок в инфраструктуру облака, которое соответствует стране пользователя. Профиль закрывается и открывается экран с быстрым стартом ознакомительной тренировки|


### *1.2 Web приложение. Регистрация и первый запуск*

Actor: новый пользователь

Conditions:

- пользователь открыл браузер


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Указал https адрес web приложения c определенным доменом в браузере |Открывается стартовый экран входа в приложение в соответствующем домене|
| 2 Инициирует регистрацию в приложении |Открывается экран для ввода данных для регистрации с указанием обязательной информации об учетной записи клиента и выборе страны, в которой будут сохранены данные пользователя, которая доступна для данного домена |
| 3 Указывает обязательные поля, в том числе логин, пароль, страну,.., и подтверждает ряд согласий на сбор данных для аналитики и хранение персональных данных, сохраняет данные |Данные и согласия сохраняются в инфраструктуре облака, которое соответствует текущему домену web приложения. Открывается экран входа в приложение |
| 5 Вводит логин и пароль и нажимает опцию входа в приложение |Происходит авторизация и аутентификация в инфраструктуре страны пользователя, открывается стартовый экран приложения с профилем пользователя|
| 6 Заполняет обязательные данные о характеристиках тела, уровне занятий спортом, выбирает виды спорта, которые ему интересны, указывает свои цели и сохраняет данные |Введенные данные сохраняются в профиль клиента без ошибок в инфраструктуру облака, которое соответствует стране пользователя. Профиль закрывается и открывается экран с быстрым стартом ознакомительной тренировки|


### *2.1 Настройка устройств с датчиками, которые не интегрированы с Healthkit\ GoogleFit*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в мобильном приложении бренда
- у пользователя есть устройства, которые не совместимы с Healthkit\ GoogleFit, например, китайские бренды


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 В приложении запустил обнаружение устройств | Приложение в радиусе 10 метров находит активные устройства |
| 2 Выбирает найденное устройство из списка найденных поблизости и пытается его подключить | Приложение отправляет запрос к устройству по протоколу взаимодействия на подключение|
| 3 Подтверждает запрос на подключение на устройстве от приложения | Приложение сохраняет настройку подключения к данному устройству |


### *2.2 Проведение тренировки*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в мобильном приложении бренда


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Начинает тренировку | Приложение стартует тренировку в своей платформе|
| 2.1 *Если ранее не было предоставлено приложению разрешений*  | Приложение запрашивает разрешения в зависимости от спортивной активности: Доступ к геолокации/ датчику пульса/ шагометру..|
| 2.2 Предоставляет разрешения на время использования приложения | Приложение сохраняет разрешения приложения |
| 3 *При наличии соответствующих разрешений* | Приложение стартует тренировку по api Healthkit\ GoogleFit, в том числе в подключенных устройствах-датчиках при их наличии, в фоне по api получая нужные данные о состоянии пользователя: маршрут, дистанцию, скорость, пульс, калории..|
| 4 Пользователь завершает тренировку | Приложение завершает тренировку по api Healthkit\ GoogleFit, в том числе в устройствах-датчиках, сохраняя данные о тренировке в хранилище Healthkit\ GoogleFit, и в самом приложении, завершает тренировку в приложении, формирует результаты в виде отчета.|


### *3. Сравнительный анализ тренировок*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении бренда


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Просматривает статистику своих тренировок | Приложение предоставляет данные тренировок, записанные платформой, в том числе с учетом данных с устройств с датчиками |
| 2 Пользователь может посмотреть динамику занятий по каждому из видов спорта | Приложение показывает графики для сравнения тренировок в течение времени |
| 3 Пользователь может просмотреть рейтинг своих тренировок в сравнении со средними показателями других пользователей или с 5 обезличенными лидерами | Приложение предоставляет сравнительный анализ по всем пользователям анонимно из всех доменов\ облаков, показывая место в рейтинге текущего пользователя относительно других пользователей (на дистанции, по кол-ву занятий в месяце, по кол-ву соревнований, по скорости прохождения онлайн уроков в приложении; сравнение с пользователями в его текущей локации, в приложении в целом, с пользователями, которые тренируются на таком же маршруте) |


### *4. Поиск друзей и отправка запроса дружить*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает экран поиска пользователей | Приложение предоставляет возможность поиска пользователей по нику в приложении, имени, локации, виду спорта, интересам, группам, но в пределах домена\ облачной инфраструктуры страны пользователя|
| 2 Найдя любого пользователя может просмотреть его профиль с доступными для других данными | Приложение выводит ник пользователя из профиля, фото профиля, его интересы, регион локации. Персональные данные не отображаются другим пользователям. |
| 3 Может отправить запрос пользователю на добавление в друзья | Приложение отправляет запрос на друзья выбранному пользователю, добавляет этого пользователя в группу запросы на подписку |
| 4 *Если выбранный пользователь принял дружбу* | Приложение выводит информирование пользователю, что выбранный пользователь согласился дружить, добавляет этого пользователя в группу друзья у текущего пользователя |
| 5 *Если выбранный пользователь отклонил дружбу* | Приложение выводит информирование пользователю, что выбранный пользователь отклонил приглашение дружить, добавляет этого пользователя в группу отклоненные подписки у текущего пользователя |


### *5. Поиск группы и вступление в группу*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает экран поиска групп | Приложение предоставляет возможность поиска групп по названию, локации, виду спорта, интересам в пределах домена\ облачной инфраструктуры страны пользователя |
| 2 Найдя подходящую группу может просмотреть её карточку | Приложение выводит краткое описание группы, регион локации, интересы группы. Просмотр переписки группы может быть недоступен для пользователя, все зависит от настройки видимости в группе |
| 3 Может отправить запрос на добавление в группу | Приложение отправляет запрос на на добавление в группу администратору группы, добавляет этот запрос в группу запросы на подписку |
| 4 *Если администратор группы подтвердил включение пользователя в группу* | Приложение добавляет этого пользователя в группу, предоставляет пользователю разрешенный набор прав и выводит информирование пользователю, что он принят в группу |
| 5 *Если администратор группы отклонил включение пользователя в группу* | Приложение выводит информирование пользователю, что его запрос отклонен, добавляет этот запрос в группу отклоненные подписки у текущего пользователя |


### *6.1 Участие в небольших соревновательных активностях*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает ленту новостей | В новостной ленте пользователя выводятся посты по его интересам, выбранным видам спорта. Посты могут являться в том числе приглашением на соревнование онлайн или оффлайн с возможностью подтверждения участия в мероприятии. Все доступные посты были созданы только для текущего домена пользователя\ доступной для него облачной инфраструктуры |
| 2 Может среди новостей найти соревнование, которое еще не прошло, подтвердить участие в мероприятии | Приложение добавляет пользователя в группу мероприятия, где обозначены условия участия, время, локация. В календаре пользователя добавляется отметка о запланированном занятии |
| 3 Может выбрать мероприятие с соревнованием в календаре в нужный день и начать соревнование | Приложение фиксирует начало мероприятия пользователя в соревеновании, начинает отслеживать его активность, включая данные с устройств с датчиками |
| 4 Может завершить участие в соревновательной активности в любое время | Приложение фиксирует завершение активности, сохраняет все данные об этом в связке с данным мероприятием |
| 5 Может просматривать результаты по соревнованию как после любой тренировки| Приложение выводит информацию о тренировке во время мероприятия |
| 6 *Если администраторы соревнования награждают участников за определенные достижения| Приложение выводит информационное поздравление пользователю о достигнутом результате за соревнование, отдельно выводя результаты соревнования и рейтинг пользователя среди других участников |

### *6.2 Мобильное приложение. Лента новостей по локации пользователя*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в мобильном приложении
- пользователь находится в стране, в которой есть такое же приложение, но работает на другой облачной инфраструктуре


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает ленту новостей | Приложение сравнивает текущую гео позицию пользователя с географией покрытия домена\ его облачной инфраструктуры страны пользователя|
| 2 *Если гео пользователя отличается от данных профиля | Просит подтвердить пользователя смену страны с разрешением выводить региональные новости|
| 3.1 *Если пользователь подтвердил смену страны с разрешением | Обменивает токен облака его дефолтной страны на токен облачной инфраструктуры страны по гео с предоставлением скоупа прав на получение\чтение новостной и рекламной ленты по гео. Пользователю доступны  посты, которые были созданы только для облачной инфраструктуры страны, выбранной по гео|
| 3.2 *Если пользователь не подтвердил смену страны | Пользователю доступны посты, которые были созданы только для облачной инфраструктуры страны, указанной в профиле пользователя |

### *6.3 Web приложение. Лента новостей по локации пользователя*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении через браузер
- пользователь находится в стране, в которой есть такое же Web приложение, но в другом домене


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает ленту новостей | Приложение сравнивает текущую гео позицию пользователя с географией покрытия домена страны пользователя|
| 2 *Если гео пользователя отличается от данных профиля | Просит подтвердить пользователя смену страны с разрешением выводить региональные новости|
| 3.1 *Если пользователь подтвердил смену страны с разрешением | Обменивает токен облака его дефолтной страны на токен облачной инфраструктуры страны по гео с предоставлением скоупа прав на получение новостной и рекламной ленты по гео. Пользователю доступны посты, которые были созданы только для домена страны, выбранной по гео |
| 3.2 *Если пользователь не подтвердил смену страны | Пользователю доступны посты, которые были созданы только для дефолтного домена пользователя |

### *7. Получение рекомендаций по обновлению обуви, инвентаря, переход в приложение с продажами товаров*

Actor: зарегистрированный пользователь

Conditions:

- пользователь залогинился в приложении
- у пользователя есть завершенные тренировки по определенному виду спорта
- пользователь указал часть используемого оборудования, спортивной экипировки
- у пользователя заполненный профиль предпочтений


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает ленту новостей | В новостной ленте пользователя выводятся посты по его интересам, выбранным видам спорта в профиле пользователя. Посты содержат рекомендации по использованию той или иной продукции бренда в данном виде спорта с возможностью перехода в онлайн магазин бренда |
| 2 Открывает пост с рекламой и переходит в онлайн магазин бренда | Приложение по локации пользователя открывает соответвующий онлайн - магазин в стране, регионе, возможно городе пользователя.|
| 3 Выбирает нужный ему товар, расплачивается в валюте страны | Приложение формирует заказ и проводит оплату. Ссылка на заказ отправляется в основное приложение пользователя в раздел покупки. |
| 4 Просматривает свой оформленный заказ в разделе Покупки| Приложение предоставляет возможность просматривать заказ, выводя актуальный статус заказа. |

### *8 Web приложение администратора. Создание новостей*

Actor: зарегистрированный пользователь-администратор с правами редактора новостей

Conditions:

- пользователь залогинился в приложении через браузер
- пользователь находится в стране своего домена


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает раздел приложения для создания новостей | Приложение открывает интерфейс, который позволяет создавать новостной контент для новостной ленты|
| 2 Вносит текстовое описание новости, прикладывает файлы с видео, фото контентом | Редактор позволяет формировать новость с разным типом контента|
| 3 Сохраняет новость с расписанием публикации в социальной сети | Новость сохраняется на платформе в домене\ облачной инфраструктуре пользователя и для нее формируется расписание публикации в новостной ленте |
| 4 Просматривает список созданных новостей, администрирует их: деактивирует неактуальные новости, копирует ранее отправленные и создает им новое расписание. | Приложение позволяет пользователю-редактору администрировать ранее созданные новости. |

### *9 Web приложение администратора. Просмотр профилей пользователей*

Actor: зарегистрированный пользователь-администратор с правами технического админа

Conditions:

- пользователь залогинился в приложении через браузер
- пользователь находится в стране своего домена


| Шаги | Реакция приложения |
| ---------| ---------|
| 1 Открывает раздел с пользователями  | Приложение открывает раздел со списком пользователей системы из IdP домена администратора |
| 2.1 *Если пользователь временно пристановит доступ для пользователя и сохранит изменения  | Измененные данные сохранятся для пользователя и применятся, аннулировав все текущие токены пользователя. |
| 2.2 *Если пользователь заблокирует доступ для пользователя и сохранит изменения | Измененные данные сохранятся для пользователя и применятся, аннулировав все текущие токены пользователя, изменив статус подписок пользователя на группы на Аннулирована |
| 2.3 *Если пользователь разблокирует доступ для пользователя и сохранит изменения | Измененные данные сохранятся для пользователя. |


